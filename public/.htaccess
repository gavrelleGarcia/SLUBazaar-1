<IfModule mod_rewrite.c>
    Options -Multiviews
    RewriteEngine On
    RewriteBase /

    # 1. Authorization Header Fix
    # Ensures PHP can read the Authorization header (needed for API tokens later)
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # 2. Skip Real Files and Directories
    # If the user requests a real file (CSS, JS, Image), serve it directly.
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    # 3. Route Everything Else to index.php
    # [QSA] = Query String Append (Preserves ?action=login)
    # [L]   = Last Rule (Stop processing)
    RewriteRule ^ index.php [QSA,L]
</IfModule>

# 4. Disable Directory Listing (Security)
# Prevents people from seeing a list of your files if they guess a folder name
Options -Indexes